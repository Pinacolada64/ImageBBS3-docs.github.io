<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.8.dev">
<meta name="author" content="Jack Followay, Jr., Ryan Sherwood, Larry Hedman, Al DeRosa">
<title>Image BBS 3.0 Programmer&#8217;s Reference Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Image BBS 3.0 Programmer&#8217;s Reference Guide</h1>
<div class="details">
<span id="author" class="author">Jack Followay, Jr.</span><br>
<span id="author2" class="author">Ryan Sherwood</span><br>
<span id="email2" class="email"><a href="mailto:sym.rsherwood@gmail.com">sym.rsherwood@gmail.com</a></span><br>
<span id="author3" class="author">Larry Hedman</span><br>
<span id="email3" class="email"><a href="mailto:larryhedman@gmail.com">larryhedman@gmail.com</a></span><br>
<span id="author4" class="author">Al DeRosa</span><br>
<span id="email4" class="email"><a href="mailto:bucko219@gmail.com">bucko219@gmail.com</a></span><br>
<span id="revnumber">version 0.1,</span>
<span id="revdate">2021-05-08</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#truepreface">Preface</a></li>
<li><a href="#trueintroduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#truehow-to-use-this-guide">How to Use This Guide</a></li>
<li><a href="#truehow-to-get-help">How to Get Help</a></li>
</ul>
</li>
<li><a href="#trueprogramming-image-bbs-3-0">Programming Image BBS 3.0</a>
<ul class="sectlevel2">
<li><a href="#truenew-features">New Features</a>
<ul class="sectlevel3">
<li><a href="#truebasic-keyword-extensions">BASIC Keyword Extensions</a>
<ul class="sectlevel4">
<li><a href="#trueload-relocate-flag"><code>LOAD</code> Relocate Flag</a></li>
<li><a href="#truenew-line-range"><code>NEW</code> line range</a></li>
<li><a href="#truehexadecimal-values">Hexadecimal Values</a></li>
<li><a href="#truebinary-values">Binary Values</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#trueprogramming-etiquette">Programming Etiquette</a>
<ul class="sectlevel3">
<li><a href="#truecreating-new-arrays">Creating New Arrays</a></li>
</ul>
</li>
<li><a href="#trueconversion-and-backward-compatibility">Conversion and Backward Compatibility</a></li>
<li><a href="#trueim-subroutines"><code>im</code> Subroutines</a></li>
<li><a href="#truesub-module-jump-table"><code>sub.*</code> Module Jump Table</a></li>
<li><a href="#true-routines"><code>&amp;</code> Routines</a>
<ul class="sectlevel3">
<li><a href="#true-image-bbs-output"><code>&amp;</code>: Image BBS Output</a></li>
<li><a href="#trueencoded-function-keys">Encoded Function Keys</a></li>
</ul>
</li>
<li><a href="#truebasic-editing-modes">BASIC Editing Modes</a>
<ul class="sectlevel3">
<li><a href="#true-by-itself"><code>&amp;</code> By Itself</a></li>
<li><a href="#trueword-wrap">Word-Wrap</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#true-parameters-explained"><code>&amp;</code> Parameters Explained</a>
<ul class="sectlevel2">
<li><a href="#true1-input"><code>&amp;,1</code> Input</a></li>
<li><a href="#true2-disk-file-input"><code>&amp;,2</code> Disk File Input</a></li>
<li><a href="#true3-read-file-from-disk"><code>&amp;,3</code> Read File from Disk</a></li>
<li><a href="#true4-get-byte-from-modem"><code>&amp;,4</code> Get Byte from Modem</a></li>
<li><a href="#true5-get-version"><code>&amp;,5</code> Get Version</a></li>
<li><a href="#true6-password-input"><code>&amp;,6</code> Password Input</a></li>
<li><a href="#true7-load-file"><code>&amp;,7</code> Load File</a></li>
<li><a href="#true8-disk-directory"><code>&amp;,8</code> Disk Directory</a></li>
<li><a href="#true9-bottom-variable"><code>&amp;,9</code> Bottom Variable</a></li>
<li><a href="#true10-terminal-mode"><code>&amp;,10</code> Terminal Mode</a></li>
<li><a href="#true11-clear-array"><code>&amp;,11</code> Clear Array</a></li>
<li><a href="#true12-new-user"><code>&amp;,12</code> New User</a></li>
<li><a href="#true13-inchr"><code>&amp;,13</code> inchr</a></li>
<li><a href="#true14-dump-array"><code>&amp;,14</code> Dump Array</a></li>
<li><a href="#true15-convert-an"><code>&amp;,15</code> Convert <code>an$</code></a></li>
<li><a href="#true16sys-49152"><code>&amp;,16</code>	sys 49152</a></li>
<li><a href="#true17sys-49155"><code>&amp;,17</code>	sys 49155</a></li>
<li><a href="#true18set-screen-mode"><code>&amp;,18</code>	Set Screen Mode</a></li>
<li><a href="#true19get-version"><code>&amp;,19</code>	Get Version</a></li>
<li><a href="#true20-read-from-interface-table"><code>&amp;,20</code> Read from Interface Table</a></li>
<li><a href="#true21-write-to-interface-table"><code>&amp;,21</code> Write to Interface Table</a></li>
<li><a href="#true22-x-tenths-of-a-second-delay"><code>&amp;,22</code> <em>x</em> Tenths of a Second Delay</a></li>
<li><a href="#true23-get-character-from-modem"><code>&amp;,23</code> Get Character from Modem</a></li>
<li><a href="#true24-xchrout1"><code>&amp;,24</code> xchrout1</a></li>
<li><a href="#true25-sound"><code>&amp;,25</code> Sound</a></li>
<li><a href="#true26-callmod"><code>&amp;,26</code> callmod</a></li>
<li><a href="#true27-save-variable-pointers"><code>&amp;,27</code> Save Variable Pointers</a></li>
<li><a href="#true28-restore-variable-pointers"><code>&amp;,28</code> Restore Variable Pointers</a></li>
<li><a href="#true29-usevar"><code>&amp;,29</code> usevar</a></li>
<li><a href="#true30-putvar"><code>&amp;,30</code> putvar</a></li>
<li><a href="#true31-zero"><code>&amp;,31</code> zero</a></li>
<li><a href="#true32-minusone"><code>&amp;,32</code> minusone</a></li>
<li><a href="#true33-getarr"><code>&amp;,33</code> getarr</a></li>
<li><a href="#true34-putarr"><code>&amp;,34</code> putarr</a></li>
<li><a href="#true35-getln"><code>&amp;,35</code> getln</a></li>
<li><a href="#true36-putln"><code>&amp;,36</code> putln</a></li>
<li><a href="#true37-trapon"><code>&amp;,37</code> trapon</a></li>
<li><a href="#true38-trapoff"><code>&amp;,38</code> trapoff</a></li>
<li><a href="#true39-prtln"><code>&amp;,39</code> prtln</a></li>
<li><a href="#true40-forcegc"><code>&amp;,40</code> forcegc</a></li>
<li><a href="#true41-setbaud"><code>&amp;,41</code> setbaud</a></li>
<li><a href="#true42-ecs-commands"><code>&amp;,42</code> ECS Commands</a></li>
<li><a href="#true52-lightbar-interface"><code>&amp;,52</code> Lightbar Interface</a></li>
<li><a href="#true53-logoff"><code>&amp;,53</code> Logoff</a></li>
<li><a href="#true54-text-editor-interface"><code>&amp;,54</code> Text editor interface</a></li>
<li><a href="#true55-output"><code>&amp;,55</code> output</a></li>
<li><a href="#true56-chatmode"><code>&amp;,56</code> chatmode</a></li>
<li><a href="#true57-relread"><code>&amp;,57</code> relread</a></li>
<li><a href="#true58-setalarm"><code>&amp;,58</code> setalarm</a></li>
<li><a href="#true59-farerr"><code>&amp;,59</code> farerr</a></li>
<li><a href="#true60-structures"><code>&amp;,60</code> Structures</a></li>
<li><a href="#true61-poscrsr"><code>&amp;,61</code> poscrsr</a></li>
<li><a href="#true62-set-time"><code>&amp;,62</code> Set Time</a></li>
<li><a href="#true63-inline1"><code>&amp;,63</code> inline1</a></li>
<li><a href="#true64-convstr"><code>&amp;,64</code> convstr</a></li>
<li><a href="#true65-convert"><code>&amp;,65</code> convert</a></li>
<li><a href="#true66-calculated-goto"><code>&amp;,66</code> Calculated GOTO</a></li>
<li><a href="#true661-mlgosub"><code>&amp;,66,1</code> mlgosub</a></li>
<li><a href="#true67-copyrite"><code>&amp;,67</code> copyrite</a></li>
<li><a href="#true68-struct"><code>&amp;,68</code> struct</a></li>
<li><a href="#true69-display-string-on-console"><code>&amp;,69</code> Display String on Console</a></li>
<li><a href="#position-cursor"><code>&amp;,70</code> Position terminal cursor</a></li>
</ul>
</li>
<li><a href="#structures">Static Arrays (Structures)</a>
<ul class="sectlevel2">
<li><a href="#truenumeric-values-and-structures">Numeric Values and Structures</a></li>
<li><a href="#trueput-string">Put String</a></li>
<li><a href="#trueget-string">Get String</a></li>
<li><a href="#trueload-structure-from-disk">Load structure from disk</a></li>
<li><a href="#truesave-a-structure-to-disk">Save a structure to disk</a></li>
<li><a href="#trueput-date">Put Date</a></li>
<li><a href="#trueget-date">Get Date</a></li>
<li><a href="#truescan-structures">Scan Structures</a></li>
<li><a href="#truesort">Sort</a></li>
<li><a href="#truescan-numbers">Scan Numbers</a></li>
<li><a href="#truescan-sum">Scan Sum</a></li>
<li><a href="#truecopy-structure">Copy Structure</a></li>
<li><a href="#truescan-for-string">Scan for String</a></li>
<li><a href="#truegame-scan">Game Scan</a></li>
<li><a href="#truetext-read">Text Read</a></li>
</ul>
</li>
<li><a href="#truevariables">Variables</a>
<ul class="sectlevel2">
<li><a href="#trueinteger">Integer</a></li>
<li><a href="#truefloating-point">Floating Point</a></li>
<li><a href="#truestring">String</a></li>
<li><a href="#truearrays">Arrays</a></li>
</ul>
</li>
<li><a href="#truepokes">POKEs</a></li>
<li><a href="#truemachine-language-routines">Machine Language Routines</a>
<ul class="sectlevel2">
<li><a href="#trueprotocols">Protocols</a>
<ul class="sectlevel3">
<li><a href="#truegraphic-menu">Graphic Menu</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#truelightbar-reference">Lightbar Reference</a>
<ul class="sectlevel2">
<li><a href="#truelightbar-numbering">Lightbar Numbering</a></li>
<li><a href="#truelightbar-interface-52">Lightbar Interface: <code>&amp;,52</code></a>
<ul class="sectlevel3">
<li><a href="#ampersand-lightbar">BASIC <code>&amp;,52</code> Commands</a></li>
<li><a href="#trueassembly-example">Assembly Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#truememory-map">Memory Map</a></li>
<li><a href="#truefile-formats">File Formats</a>
<ul class="sectlevel2">
<li><a href="#trueintroduction-2">Introduction</a>
<ul class="sectlevel3">
<li><a href="#truee-data"><code>e.data</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="truepreface"><a class="anchor" href="#truepreface"></a>Preface</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Preliminary start on documentation. Feedback welcome!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Welcome to the <em>Image BBS 3.0 Programmer&#8217;s Reference Guide</em>.</p>
</div>
<div class="paragraph">
<p>Image BBS has always been a versatile system, allowing a balance between the simplicity of operation and the power of customization with BASIC and ML programming.
With the advent of Image BBS v3.0, the power of the system has increased greatly.</p>
</div>
<div class="paragraph">
<p>Nearly the entire BBS can be customized completely online without the need for programming knowledge.  However, Image BBS v3.0 also provides for many powerful new programming tools not before available to the SysOp who desires complete customization of the BBS by changing the BASIC code.</p>
</div>
<div class="paragraph">
<p>This guide is designed to help such programmers use the Image Application Programming Interface (API) more productively.
A lot of hard work has gone into this manual as it was created while the BBS was still being developed.
Care was taken to document as much of the BBS as possible for just this purpose.
We hope you find this useful in creating the next generation of Image BBS applications.</p>
</div>
<div class="paragraph">
<p>Happy programming!</p>
</div>
<div class="paragraph text-right">
<p>&#8212;Jack Followay, Jr., Larry Hedman, Al DeRosa, and Ryan Sherwood</p>
</div>
<div class="paragraph text-right">
<p>&#8212;thanks to jam for editing help</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueintroduction"><a class="anchor" href="#trueintroduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Welcome to the first official New Image BBS Programmer’s Reference Guide.
While there was an unofficial guide released for Image v1.2, we hoped to give SysOps something they could trust when questions arose about v3.0.
Nearly everyone who helped write Image v3.0 helped contribute to this guide.
I would like to personally thank everyone who was involved, but if I’ve forgotten anyone please forgive me!</p>
</div>
<div class="paragraph">
<p>Al DeRosa (Bucko)</p>
</div>
<div class="paragraph">
<p>Larry Gartin (Wheelman)</p>
</div>
<div class="paragraph">
<p>Ray Kelm (Professor)</p>
</div>
<div class="paragraph">
<p>John Moore (Little John)</p>
</div>
<div class="paragraph">
<p>Ryan Powers (MonOp)</p>
</div>
<div class="paragraph">
<p>Bob Sisko (Iron Axe)</p>
</div>
<div class="paragraph">
<p>Ed Wilson (Fred Krueger)</p>
</div>
<div class="paragraph">
<p>And most of all, I’d like to thank our dear friend, Fred Dart, to whom we owe the very existence of Image v2.0.
Without Fred, the project would have been lost forever.
It is in his memory that we dedicate Image BBS v3.0.</p>
</div>
<div class="sect2">
<h3 id="truehow-to-use-this-guide"><a class="anchor" href="#truehow-to-use-this-guide"></a>How to Use This Guide</h3>

</div>
<div class="sect2">
<h3 id="truehow-to-get-help"><a class="anchor" href="#truehow-to-get-help"></a>How to Get Help</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="trueprogramming-image-bbs-3-0"><a class="anchor" href="#trueprogramming-image-bbs-3-0"></a>Programming Image BBS 3.0</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truenew-features"><a class="anchor" href="#truenew-features"></a>New Features</h3>
<div class="paragraph">
<p><code><em>variable</em>=usr(0)</code> function reads the stack pointer to display how much free space is on the processor stack.</p>
</div>
<div class="sect3">
<h4 id="truebasic-keyword-extensions"><a class="anchor" href="#truebasic-keyword-extensions"></a>BASIC Keyword Extensions</h4>
<div class="sect4">
<h5 id="trueload-relocate-flag"><a class="anchor" href="#trueload-relocate-flag"></a><code>LOAD</code> Relocate Flag</h5>
<div class="paragraph">
<p>Regular Commodore DOS uses the <code>,1</code> in <code>load"filename",8,1</code> to mean &#8220;load this file to the load address stored in the file.&#8221;</p>
</div>
<div class="paragraph">
<p>In Image BBS, the <em>relocate_flag</em> has an expanded purpose&#8212;&#8203;specifying the <em>segment</em> of memory to load a particular file to.
A segment is the address which a file will load into, ignoring the file&#8217;s existing load address contained in the first two bytes of the file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Currently, some segments are undefined.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Segment</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">Address</th>
<th class="tableblock halign-left valign-top">Example File</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Protocol start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$c000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>++ punter</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Print mode table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>e.printmodes</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lightbar table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>e.lightdefs</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alarm table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>e.alarms</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCII &#8594; Commodore translation table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n/a</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commodore &#8594; ASCII translation table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n/a</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network alarm table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nm.times</code></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title">Example 1. Loading a Protocol</div>
<div class="content">
<div class="paragraph">
<p>Here are two different methods of accomplishing the same thing, loading the Punter file transfer protocol.</p>
</div>
<div class="paragraph">
<p>The first uses the enhanced <code>load</code> function:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>3000 dr=5:gosub 3:a$="++ punter":load dr$+a$,dv%,2 <i class="conum" data-value="1"></i><b>(1)</b></pre>
</div>
</div>
<div class="paragraph">
<p>And the second relies more heavily on the Image ML, using the parameters set by BASIC:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>3000 dr=5:gosub 3:a$=dr$+"++ punter":&amp;,7,2 <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="paragraph">
<p>In both examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dr=5:gosub 3</code> takes an Image drive number (<code>dr</code>, 1-6) to return the device (<code>dv%</code>, <em>e.g.</em> <code>10</code>) and drive prefix (<code>dr$</code>, <em>e.g.</em>, <code>0:</code>).
Here, it returns the device and drive which your modules are stored on.</p>
</li>
<li>
<p><code>a$="++ punter"</code> sets the filename to <code>load</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Method 1: <code>load dr$+a$,dv%,2</code> loads drive prefix <code>dr$</code> plus filename <code>a$</code> from device <code>dv%</code> to segment 2 (<code>$c000</code>)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Method 2: <code>&amp;,7,2</code> uses <code>dr$</code>, <code>a$</code> and <code>dv%</code> as defined by BASIC, but is shorter code</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="truenew-line-range"><a class="anchor" href="#truenew-line-range"></a><code>NEW</code> line range</h5>
<div class="paragraph">
<p><code>new <em>line_number</em></code> prepares to <code>load</code> a new module by erasing lines from <code>line_number</code> to the beginning of the next module.</p>
</div>
<div class="paragraph">
<p><code>new 3000</code> erases lines 3000-4000.</p>
</div>
</div>
<div class="sect4">
<h5 id="truehexadecimal-values"><a class="anchor" href="#truehexadecimal-values"></a>Hexadecimal Values</h5>
<div class="paragraph">
<p>Hexadecimal values (base 16) are prefaced with <code>$</code>.
They can be used in <code>poke</code>, <code>peek</code>, <code>sys</code> and <code>&amp;</code> commands.
<code>poke $d004,$0c</code> is the equivalent of <code>poke 53252,12</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="truebinary-values"><a class="anchor" href="#truebinary-values"></a>Binary Values</h5>
<div class="paragraph">
<p>Binary values (base 2) are prefaced with <code>%</code> and up to 8 bits can be specified.
Leading <code>0</code>s do not have to be specified.</p>
</div>
<div class="paragraph">
<p>Binary values can be used with the same BASIC keywords as above.
Hexadecimal and binary can be combined, <em>i.e.</em>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>poke $d004,%00001100</pre>
</div>
</div>
<div class="paragraph">
<p>is again the equivalent of <code>poke 53252,12</code>.
Since only the lowest 4 bits are being set, the example can be shortened to:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>poke $d004,%1100</pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<div class="title">Parsing Limitations</div>
<p>If you want to do logical operations like <code>and</code> or <code>or</code> with the new binary or hexadecimal prefixes, the only keywords they work with are <code>poke</code>, <code>peek</code>, <code>sys</code>, and <code>&amp;</code>.</p>
</div>
<div class="paragraph">
<p>Putting hexadecimal or binary prefixes after logical operators results in a <code>?syntax  error</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>poke $d004,peek($d004) and %1100</pre>
</div>
</div>
<div class="paragraph">
<p>Instead, assign <code>%1100</code> to a variable first, then perform the logical operation using the variable:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>c=%1100:poke $d004,peek($d004) and c</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueprogramming-etiquette"><a class="anchor" href="#trueprogramming-etiquette"></a>Programming Etiquette<a id="programming-etiquette"></a></h3>
<div class="paragraph">
<p>Be nice.
Write clean code.</p>
</div>
<div class="sect3">
<h4 id="truecreating-new-arrays"><a class="anchor" href="#truecreating-new-arrays"></a>Creating New Arrays</h4>
<div class="paragraph">
<p>If you define any new arrays in a module, be sure not to consume unnecessary memory after you end the module.
You can do this by using the <code>&amp;,27</code> (variable pointer save) and <code>&amp;,28</code> (variable pointer restore) calls.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Image 1.2 had just one level of variable pointer save and restore.
Image 1.3 and above adds multiple levels of save and restore with an additional parameter.</p>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">3000 &amp;,27,2 <i class="conum" data-value="1"></i><b>(1)</b>
3002 dim u%(10,20) <i class="conum" data-value="2"></i><b>(2)</b>
...
3010 &amp;,28,2:goto 300 <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>save current variable pointers, and create variable pointer level 2</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>create new array</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>restore level 2 array pointers (this frees up memory used by the array but preserves variables still needed by level 1), and go to main prompt</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The main prompt restores level 1 array pointers and already does a <code>&amp;,28,1</code> there.
If you substitute <code>&amp;,27,1</code> for <code>&amp;,27,2</code> and <code>&amp;,28,1</code> for <code>&amp;,28,2</code> in the above code, line 300 will redo <code>&amp;,28,1</code>.
This causes a <code>?redim&#8217;d array  error' on 306</code> (redimensioned array error).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueconversion-and-backward-compatibility"><a class="anchor" href="#trueconversion-and-backward-compatibility"></a>Conversion and Backward Compatibility</h3>
<div class="paragraph">
<p>Image v3.0 is a major change in design and programming style from previous versions.
The first reaction might be to assume that you can no longer use legacy modules created under Image v1.2a and below.
However, nearly everything written under previous versions of Image can be made to run under v3.0.
The easiest method for this is to run under &#8220;1.3 emulation.&#8221;
This mode greatly reduces available memory, but allows a program to make the same calls to <code>im</code> that were available under Image 1.2a.
The best method for using legacy modules is to convert them to v3.0 compliant modules.</p>
</div>
<div class="paragraph">
<p>This section is provided to help you as you attempt to convert such modules.
The v1.2a &#8592;&#8594; v2.0 cross-reference will be your best tool, but please take time to read the notes regarding making the modules truly Image v3.0 compliant rather than just &#8220;compatible.&#8221;
You will want to take careful note of the theory and structure of a v3.0 compliant program, found in the <a href="#programming-etiquette">Programming Etiquette</a> section of this guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="trueim-subroutines"><a class="anchor" href="#trueim-subroutines"></a><code>im</code> Subroutines</h3>
<div class="paragraph">
<p>Some routines are simply needed too often by too many modules to justify placing them in every single module.
Subroutines are a programmer&#8217;s greatest friend.
The core <code>im</code> file contains many subroutines which you will find basic to your application or module&#8217;s needs.
Be sure to read the <a href="#programming-etiquette">Programming Etiquette</a> section for help when deciding where to place a new routine you create.</p>
</div>
</div>
<div class="sect2">
<h3 id="truesub-module-jump-table"><a class="anchor" href="#truesub-module-jump-table"></a><code>sub.*</code> Module Jump Table</h3>
<div class="paragraph">
<p>Files with a <code>sub.</code> prefix contain routines which are used often, but to save memory and avoid code repetition, are separated from the main <code>im</code> module.</p>
</div>
</div>
<div class="sect2">
<h3 id="true-routines"><a class="anchor" href="#true-routines"></a><code>&amp;</code> Routines</h3>
<div class="paragraph">
<p><code>&amp;</code> is the command character which is BASIC&#8217;s interface to 70 machine language routines of Image BBS.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section is undergoing discovery of what some routines are for and how they are used.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="true-image-bbs-output"><a class="anchor" href="#true-image-bbs-output"></a><code>&amp;</code>: Image BBS Output</h4>
<div class="paragraph">
<p>In BASIC, the <code>print</code> keyword (or its abbreviation, <code>?</code>) displays text on the screen, as in:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>print"Hello there!"</pre>
</div>
</div>
<div class="paragraph">
<p>You can substitute <code>&amp;</code> in Image BBS to do the same thing:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&amp;"Hello there!"</pre>
</div>
</div>
<div class="paragraph">
<p>But unlike BASIC, after outputting this text, the cursor remains on the same line&#8212;&#8203;there is no automatic carriage return printed.</p>
</div>
<div class="paragraph">
<p>It&#8217;s as if a semicolon (<code>;</code>) was used after the <code>print</code> statement above&#8212;&#8203;this keeps the text all on one line:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>print"Hello ";"there!";</pre>
</div>
</div>
<div class="paragraph">
<p>vs. printing on two lines:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>print"Hello"
print"there!"</pre>
</div>
</div>
<div class="paragraph">
<p>To work around this, you can output a <em>carriage return</em>, which moves the cursor to the next line.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<div class="title">Boring Background: CR/LF, CR, LF?</div>
<p>On other terminals or operating systems, a carriage return moves the cursor down a row, staying in the current column, but an additional <em>linefeed</em> character is needed to move the cursor to the beginning of the current row.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Hello
      there!</pre>
</div>
</div>
<div class="paragraph">
<p>This stairstep-looking result is what printing looks like with only a linefeed when the terminal needed both a carriage reeturn and a linefeed.
Probably not the desired result.
However, <code>print</code>ing in Commodore BASIC&#8212;&#8203;and our BBS in this example&#8212;&#8203;doesn&#8217;t need them.</p>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&amp;"Hello there!"+chr$(13)</pre>
</div>
</div>
<div class="paragraph">
<p><code>chr$()</code> (read it as &#8220;character string&#8221;) is a function that outputs a character supplied in parentheses.
A carriage return is <code>chr$(13)</code>.
So this snippet of code will move the cursor to the next line after outputting <code>Hello there!</code>.</p>
</div>
<div class="paragraph">
<p>There is also a string variable defined in <code>im</code>: <code>r$=chr$(13)</code> (short for &#8220;return&#8221;).
This is a handy shortcut.
You can now code:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&amp;"Hello there!"+r$</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Using the <code>r$</code> variable is actually an easy way to write data containing carriage returns to a SEQ file, as you&#8217;ll see later.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>But there&#8217;s something even handier available.</p>
</div>
</div>
<div class="sect3">
<h4 id="trueencoded-function-keys"><a class="anchor" href="#trueencoded-function-keys"></a>Encoded Function Keys</h4>
<div class="paragraph">
<p>Some special characters are difficult (or impossible) to type in BASIC.
Or, they might cause problems while reading disk files.
Therefore, they have been encoded using the reverse video letters seen while typing function keys when in Commodore&#8217;s &#8220;quote mode.&#8221;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truebasic-editing-modes"><a class="anchor" href="#truebasic-editing-modes"></a>BASIC Editing Modes</h3>
<div class="paragraph">
<div class="title">Quote Mode</div>
<p>In the BASIC editor, once the quote mark (<span class="keyseq"><kbd>Shift</kbd>+<kbd>2</kbd></span>, <kbd>"</kbd>) is typed, the cursor controls stop operating and start displaying reversed characters which stand for the cursor control or symbol you are hitting.
This allows your program to perform these cursor controls, because once the text inside the quotes is <code>PRINT</code>ed they perform their functions as if typed manually.
The <kbd>Inst/Del</kbd> key is the only cursor control not affected by &#8220;quote mode.&#8221;</p>
</div>
<div class="paragraph">
<p>Typing a second <kbd>"</kbd> exits quote mode, and allows you to use the cursor keys to edit the program line again.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="#position-cursor"><code>&amp;,70</code> Position terminal cursor</a> for how to position the terminal cursor easily in Image BBS.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Insert Mode</div>
<p>Insert mode is similar to quote mode, only for the number of spaces you insert with the <span class="keyseq"><kbd>Shift</kbd>+<kbd>Inst/Del</kbd></span> key, the BASIC editor is in quote mode.
Once that number of characters is typed, insert mode is exited.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<kbd>Return</kbd> gets out of quote and insert mode, and adds the current line into the BASIC program.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="keyseq"><kbd>Shift</kbd>+<kbd>Return</kbd></span> gets out of quote and insert mode, but does <em>not</em> add the current line into the BASIC program.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Image BBS translates specific PETSCII characters into the reverse video letters seen when typing function keys inside quotation marks.</p>
</div>
<div class="paragraph">
<p>This eliminates a few difficulties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Entering special characters is made easier</p>
</li>
<li>
<p>Some more simply written code (and BASIC itself) can truncate data when a <code>,</code> is encountered in a SEQ file</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example 2. BASIC Pitfall</div>
<div class="content">
<div class="paragraph">
<p>Using <code>input#2,a$</code> when the disk file contains a string <code>hello,there</code> returns only <code>hello</code> in <code>a$</code>.</p>
</div>
<div class="paragraph">
<p>You can prefix the string with <code>"</code> on disk to get around that.
But most likely, you want to read <code>hello</code> and <code>there</code> into two separate variables. <code>input#2,a$,b$</code> does that, resulting in <code>a$="hello"</code> and <code>b$="there"</code>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Image BBS converts these special characters from their encoded form to readable characters when you:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use <kbd>RD</kbd> to read a SEQ file</p>
</li>
<li>
<p>use <kbd>SB</kbd> to read a post</p>
</li>
<li>
<p>Use <kbd>WF</kbd> to <kbd>.G</kbd>et, <kbd>.E</kbd>dit, and <kbd>.P</kbd>ut a file back.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>image seq reader</code> utility used in BASIC also does this.</p>
</div>
<div class="paragraph">
<p>As it relates to carriage returns, though, we can see in the following table:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 1. Image BBS Encoded Function Keys</caption>
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Quoted</th>
<th class="tableblock halign-left valign-top">Character</th>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Quoted</th>
<th class="tableblock halign-left valign-top">Character</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>f1</kbd></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>E</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>,</kbd> comma</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>f2</kbd></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>I</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>?</kbd> question mark</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>f3</kbd></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>F</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>:</kbd> colon</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>f4</kbd></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>J</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>=</kbd> equal sign</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>f5</kbd></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>G</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>"</kbd> quotation mark</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>f6</kbd></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>K</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>Return</kbd> <code>chr$(13)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>f7</kbd></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>H</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>*</kbd> asterisk</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>f8</kbd></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><kbd>L</kbd></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>^</kbd> up arrow</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We can take the previous example of:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&amp;"Hello there!"+r$</pre>
</div>
</div>
<div class="paragraph">
<p>and simplify it further with:</p>
</div>
<div class="paragraph">
<p><code>print"Hello there!<kbd>f6</kbd>"</code></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Outputting a string which itself contains MCI commands or MCI string variables will not work as expected, <em>e.g.</em>:
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>c$="Hi":c%=3:z$="&pound;$c &pound;#3&pound;#0&pound;%c":&amp;"&pound;$z"</code></p>
</div>
<div class="paragraph">
<p>does not output <code>z$</code> (which outputs <code>c$</code>, and sets 3 leading zeroes and displays <code>c%</code>).
It will output a literal</p>
</div>
<div class="literalblock">
<div class="content">
<pre>£$c £#3£#0£%c</pre>
</div>
</div>
<div class="paragraph">
<p>Instead, do this:</p>
</div>
<div class="paragraph">
<p><code>c$="Hi":c%=3:z$="£$c £#3£# £%c":&amp;z$</code></p>
</div>
<div class="paragraph">
<p>This will output the expected</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Hi 003</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="true-by-itself"><a class="anchor" href="#true-by-itself"></a><code>&amp;</code> By Itself</h4>
<div class="paragraph">
<p>This is a quick way to output the contents of <code>a$</code>.</p>
</div>
<div class="paragraph">
<p><code>a$="Hello there<kbd>f6</kbd>":&amp;</code></p>
</div>
<div class="paragraph">
<p>This outputs <code>Hello there</code> and a carriage return.</p>
</div>
</div>
<div class="sect3">
<h4 id="trueword-wrap"><a class="anchor" href="#trueword-wrap"></a>Word-Wrap</h4>
<div class="paragraph">
<p>Setting the variable <code>lp=1</code> and outputting text with <code>&amp;"&#8230;&#8203;"</code> word-wraps to 40 columns on the console, and whatever the remote user&#8217;s screen width is.</p>
</div>
<div class="paragraph">
<p>Setting <code>lp=0</code> disables word-wrap, and words do not break at margins.</p>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="true-parameters-explained"><a class="anchor" href="#true-parameters-explained"></a><code>&amp;</code> Parameters Explained</h2>
<div class="sectionbody">
<div class="paragraph">
<p>&amp;,<em>call</em></p>
</div>
<div class="paragraph">
<p>This
&amp;,<em>call</em>[,<em>optional</em>]</p>
</div>
<div class="paragraph">
<p>&amp;,<em>call</em>[,<em>optional</em>[,<em>parameter</em>]]</p>
</div>
<div class="sect2">
<h3 id="true1-input"><a class="anchor" href="#true1-input"></a><code>&amp;,1</code> Input</h3>
<div class="paragraph">
<p><code>&amp;,1</code> accepts input from the user.</p>
</div>
<div class="paragraph">
<p><em>Parameters</em>:</p>
</div>
<div class="paragraph">
<p><code>&amp;,1,<em>editor</em>[,<em>password</em>]</code></p>
</div>
<div class="paragraph">
<p><code>p$</code>: text of prompt shown before <code>:</code> and input accepted</p>
</div>
<div class="paragraph">
<p><code>w$</code>: text to use as default when using edit mode</p>
</div>
<div class="paragraph">
<p><code>pl=0</code>: convert lowercase input to uppercase</p>
</div>
<div class="paragraph">
<p><code>pl=1</code>: allow both lowercase and uppercase</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Not all of these parameters are currently understood.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>editor</code>: editor flags:</p>
</div>
<div class="paragraph">
<p>These are shown in binary, each bit controls a separate function of the input routine.
Bits may be combined together to perform multiple functions.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bits</th>
<th class="tableblock halign-left valign-top">Decimal</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00000001</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">disallow some characters (need to decode which)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00000010</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>.</kbd> or <kbd>/</kbd> on column one exits input</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00000100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">show prompt (<code>p$</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00001000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allow <kbd>£</kbd> (the MCI command character) input</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00010000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">word wrap enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00100000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">edit mode (shows first <code>p$</code>, <code>w$</code>, then another <code>p$</code> and allows <kbd>Ctrl</kbd> key editing combinations)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%01000000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ignore time remaining</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%10000000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>Delete</kbd> on column one exits input</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>password</code>: password flags:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bits</th>
<th class="tableblock halign-left valign-top">Decimal</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00000001</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">password mask enabled for output</p>
<p class="tableblock">[uses character in <code>peek(17138)</code>]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%00000010</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no output</p></td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="sect2">
<h3 id="true2-disk-file-input"><a class="anchor" href="#true2-disk-file-input"></a><code>&amp;,2</code> Disk File Input</h3>
<div class="paragraph">
<p><code>&amp;,2,<em>lfn</em>[,<em>bytes</em>]</code></p>
</div>
<div class="paragraph">
<p>Disk file input.</p>
</div>
<div class="paragraph">
<p><code>lfn</code>: logical file number</p>
</div>
<div class="paragraph">
<p><code>bytes</code>: number of bytes to get from file, 1-80</p>
</div>
<div class="paragraph">
<p><em>Returns:</em></p>
</div>
<div class="paragraph">
<p><code>a$</code>: bytes from file</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true3-read-file-from-disk"><a class="anchor" href="#true3-read-file-from-disk"></a><code>&amp;,3</code> Read File from Disk</h3>
<div class="paragraph">
<p><code>&amp;,3,<em>lfn</em>[,<em>speed</em>]</code>	read file from disk</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>lfn</code>: logical file number</p>
</div>
<div class="paragraph">
<p><code>speed</code>: speed (1-20, for movie file read)</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true4-get-byte-from-modem"><a class="anchor" href="#true4-get-byte-from-modem"></a><code>&amp;,4</code> Get Byte from Modem</h3>
<div class="paragraph">
<p><code>&amp;,4</code>	get byte from modem, <code>x=peek(780)</code> reads it</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true5-get-version"><a class="anchor" href="#true5-get-version"></a><code>&amp;,5</code> Get Version</h3>
<div class="paragraph">
<p><em>Returns</em>:</p>
</div>
<div class="paragraph">
<p><code>lp</code>: major/minor (1.3)</p>
</div>
<div class="paragraph">
<p><code>a%</code>: revision (1)</p>
</div>
<div class="paragraph">
<p><code>a$</code>: date (<code>"12/29/91  1:18p"</code>)</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true6-password-input"><a class="anchor" href="#true6-password-input"></a><code>&amp;,6</code> Password Input</h3>
<div class="paragraph">
<p>Sets input length to 14, uses the input mask character defined in memory location <code>17138</code> to display instead of the user&#8217;s input.</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><em>Returns:</em></p>
</div>
<div class="paragraph">
<p><code>an$</code>: password</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true7-load-file"><a class="anchor" href="#true7-load-file"></a><code>&amp;,7</code> Load File</h3>
<div class="paragraph">
<p><em>Syntax:</em> <code>&amp;,7,<em>device</em>[,<em>segment</em>]</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>13: wedgemem</pre>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true8-disk-directory"><a class="anchor" href="#true8-disk-directory"></a><code>&amp;,8</code> Disk Directory</h3>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,8,<em>lfn</em>,<em>y</em></code></p>
</div>
<div class="paragraph">
<p><em>lfn</em>: logical file #</p>
</div>
<div class="paragraph">
<p><em>y</em>: [<code>0</code>=entire directory | <code>1</code>=single line]</p>
</div>
<div class="paragraph">
<p><em>Returns:</em></p>
</div>
<div class="paragraph">
<p><em>y</em>=<code>0</code>: Displays directory</p>
</div>
<div class="paragraph">
<p><em>y</em>=<code>1</code>, <code>a$</code>: single line of disk directory information</p>
</div>
<div class="literalblock">
<div class="title">Reading Disk Directory</div>
<div class="content">
<pre>3000 dr=1:gosub 3:open 2,dv%,0,dr$+"$":get#2,a$,a$ <i class="conum" data-value="1"></i><b>(1)</b>
3002 &amp;,8,2,0:close 2:goto 300 <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>dr=1:gosub 3</code>: get device of <code>s.</code> disk.
<code>open 2,dv%,0,dr$+"$"</code>: open the directory (the secondary address must be <code>0</code> to instruct the drive to return the disk directory as a BASIC-formatted series of lines.)
<code>get#2,a$,a$</code>: discard the load address information.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>&amp;,8,2,0</code>: Get entire disk directory. <code>close 2</code>: close lfn#2. <code>goto 300</code>: go to main prompt.</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true9-bottom-variable"><a class="anchor" href="#true9-bottom-variable"></a><code>&amp;,9</code> Bottom Variable</h3>
<div class="paragraph">
<p>Print variables to 16 character status window.</p>
</div>
<div class="paragraph">
<p><code>&amp;,9[,x]</code></p>
</div>
<div class="paragraph">
<p><code>&amp;,9[,0]</code> print <code>an$</code> to status window</p>
</div>
<div class="paragraph">
<p><code>&amp;,9,1</code>	print <code>a$</code> to status window</p>
</div>
<div class="paragraph">
<p><code>&amp;,9,2</code> print <code>b$</code> to status window</p>
</div>
<div class="paragraph">
<p><code>&amp;,9,4</code> looks like <code>d1$</code></p>
</div>
<div class="paragraph">
<p>(x seems to follow the variable table definitions of Image 1.2)</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true10-terminal-mode"><a class="anchor" href="#true10-terminal-mode"></a><code>&amp;,10</code> Terminal Mode</h3>
<div class="paragraph">
<p><span class="keyseq"><kbd>C=</kbd>+<kbd>Ctrl</kbd></span> leaves terminal mode</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true11-clear-array"><a class="anchor" href="#true11-clear-array"></a><code>&amp;,11</code> Clear Array</h3>
<div class="paragraph">
<p>Clear array #<em>x</em>.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true12-new-user"><a class="anchor" href="#true12-new-user"></a><code>&amp;,12</code> New User</h3>
<div class="paragraph">
<p>Non-abortable file read.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true13-inchr"><a class="anchor" href="#true13-inchr"></a><code>&amp;,13</code> inchr</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Researching this.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true14-dump-array"><a class="anchor" href="#true14-dump-array"></a><code>&amp;,14</code> Dump Array</h3>
<div class="paragraph">
<p>Write array elements to an already-open file, using logical file #2.</p>
</div>
<div class="paragraph">
<p><code>&amp;,14,<em>array</em></code> Output however many elements were `DIM`ensioned for the array</p>
</div>
<div class="paragraph">
<p><code>&amp;,14,<em>array</em>,<em>end</em></code> Output elements 1-<em>end</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="#array-table">[array-table]</a> for the arrays which correspond to <em>array</em>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true15-convert-an"><a class="anchor" href="#true15-convert-an"></a><code>&amp;,15</code> Convert <code>an$</code></h3>
<div class="paragraph">
<p>This group of functions perform various conversions on the string contained in <code>an$</code>.</p>
</div>
<div class="paragraph">
<div class="title">Example 1:</div>
<p><code>&amp;,15[,0]</code>
<code>an$=d1$:&amp;,15:&amp;an$</code> &#8594; displays verbose date</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>an$=d1$</code>:
Put current 11-digit date (<code>d1$</code>) into <code>an$</code>, <em>e.g.</em> <code>60429218427</code></p>
</li>
<li>
<p><code>&amp;,15</code>:
Convert 11-digit date to a long date string, <em>e.g.</em> <code>Thu Apr 29, 2021&nbsp;&nbsp;4:29 PM PST</code></p>
</li>
<li>
<p><code>&amp;an$</code>:
Output it</p>
</li>
</ol>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&amp;,15,1</code></dt>
<dd>
<p>Changes an all uppercase string to mixed case.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>an$="THE CHIEF":&amp;,15,1:&amp;an$</code> &#8594; <code>The Chief</code></p>
</div>
<hr>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&amp;,15,2</code></dt>
<dd>
<p>Converts encoded function key characters into readable characters</p>
</dd>
<dt class="hdlist1"><code>i.t</code></dt>
<dd>
<p><code>an$="host<kbd>f3</kbd>port":&amp;,15,2:&amp;"&pound;v7<kbd>f6</kbd>"</code> &#8594; <code>host:port</code></p>
</dd>
<dt class="hdlist1"><code>&amp;,15,3</code> and <code>&amp;,15,4</code></dt>
<dd>
<p>(These point to, and are the same as, <code>&amp;,15,2</code>.)</p>
</dd>
<dt class="hdlist1"><code>&amp;,15,5</code></dt>
<dd>
<p><code>newdate</code></p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This function is currently being researched.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&amp;,15,6,<em>x</em></code></dt>
<dd>
<p>Split <code>an$</code> into two strings, <code>an$</code> and <code>a$</code>, if <code>chr$(<em>x</em>)</code> or <code>asc("<em>x</em>")</code> is found in <code>an$</code>.</p>
</dd>
</dl>
</div>
<div class="olist arabic">
<div class="title">Split on space, two ways</div>
<ol class="arabic" start="1">
<li>
<p><code>an$="Hello world":&amp;,15,6,<strong>32</strong></code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This splits <code>"Hello world"</code> at the <code><strong>chr$(32)</strong></code> (space), resulting in <code>an$="Hello"</code> and <code>a$="world"</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><code>an$="Hello world":&amp;,15,6,<strong>asc(" ")</strong></code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This splits <code>"Hello world"</code> at the <strong>ASCII value of <em>space</em></strong> (32), resulting in <code>an$="Hello"</code> and <code>a$="world"</code>.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 2. After split</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>an$="Hello"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chr$(<em>x</em>)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a$="world"</code></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="title">im</div>
<div class="content">
<pre>1262 &amp;,15,6,140:uu$=an$:an$=a$</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>140</code>=<kbd>f8</kbd>, Image <code>^</code>
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>1472 &amp;,15,6,133:d2%=val(an$):d1%=a:dr=.:dv%(.)=d1%:dr%(.)=d2%</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>133</code>=<kbd>f1</kbd>, Image <code>,</code>
</td>
</tr>
</table>
</div>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true16sys-49152"><a class="anchor" href="#true16sys-49152"></a><code>&amp;,16</code>	sys 49152</h3>
<div class="paragraph">
<p>Perform <code>sys 49152</code>,</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true17sys-49155"><a class="anchor" href="#true17sys-49155"></a><code>&amp;,17</code>	sys 49155</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true18set-screen-mode"><a class="anchor" href="#true18set-screen-mode"></a><code>&amp;,18</code>	Set Screen Mode</h3>
<div class="paragraph">
<p>This command turns the screen mask on or off.</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>x=0</code>: off</p>
</div>
<div class="paragraph">
<p><code>x=1</code>: on</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true19get-version"><a class="anchor" href="#true19get-version"></a><code>&amp;,19</code>	Get Version</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true20-read-from-interface-table"><a class="anchor" href="#true20-read-from-interface-table"></a><code>&amp;,20</code> Read from Interface Table</h3>
<div class="paragraph">
<p>Reads a byte from the interface table.</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>x</code>: index (see table)</p>
</div>
<div class="paragraph">
<p><code>y</code>: command [<code>0</code>=put in <code>a%</code> | <code>1</code>=return in accumulator, <code>peek(780)</code>]</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true21-write-to-interface-table"><a class="anchor" href="#true21-write-to-interface-table"></a><code>&amp;,21</code> Write to Interface Table</h3>
<div class="paragraph">
<p>Writes a byte to the interface table.</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>x = index (see table)
y = value</pre>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true22-x-tenths-of-a-second-delay"><a class="anchor" href="#true22-x-tenths-of-a-second-delay"></a><code>&amp;,22</code> <em>x</em> Tenths of a Second Delay</h3>
<div class="paragraph">
<p>tenwait [x=tenths of a second]</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">&amp;,22,200 <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Wait 20 seconds (20 10/10<sup>ths</sup> of a second)</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true23-get-character-from-modem"><a class="anchor" href="#true23-get-character-from-modem"></a><code>&amp;,23</code> Get Character from Modem</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">3000 &amp;,23:c=peek(780):if c&lt;&gt;32 then 3000 <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Get character from modem.
Save in <code>c</code>.
Loop until the caller hits <kbd>Space</kbd> [<code>chr$(32)</code>].</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>&amp;,23</code> doesn&#8217;t stop and wait for input, unlike the <code>&pound;g1</code> MCI command.
If no character is received from the connected user, <code>peek(780)=0</code>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true24-xchrout1"><a class="anchor" href="#true24-xchrout1"></a><code>&amp;,24</code> xchrout1</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This following routine is used by Image BBS machine language itself; there is little reason to call it from BASIC.
</td>
</tr>
</table>
</div>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true25-sound"><a class="anchor" href="#true25-sound"></a><code>&amp;,25</code> Sound</h3>
<div class="paragraph">
<p>Produce 4 separate sounds, optionally repeating the sound a specified number of times.</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,25,<em>sound</em>[,<em>repeat</em>]</code></p>
</div>
<div class="paragraph">
<p><em>sound</em>=</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&amp;,25,0  beep
&amp;,25,1	ding
&amp;,25,2	higher pitched ding
&amp;,25,3	gong sound from CCGMS (a terminal program)</pre>
</div>
</div>
<div class="paragraph">
<p><code>repeat=</code>
Number of times to repeat: [<code>0</code>: Stop repeat | <code>1-254</code>: Repeat count | <code>255</code>: infinite]</p>
</div>
</div>
<div class="sect2">
<h3 id="true26-callmod"><a class="anchor" href="#true26-callmod"></a><code>&amp;,26</code> callmod</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true27-save-variable-pointers"><a class="anchor" href="#true27-save-variable-pointers"></a><code>&amp;,27</code> Save Variable Pointers</h3>
<div class="paragraph">
<p>When modules use arrays not already defined in <code>im</code>, <mark>FIXME</mark></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true28-restore-variable-pointers"><a class="anchor" href="#true28-restore-variable-pointers"></a><code>&amp;,28</code> Restore Variable Pointers</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Image 1.2 had just one level of variable pointer save and restore.
Image 1.3 and above adds multiple levels of save and restore with this additional parameter.</p>
</div>
</div>
</div>
<hr>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
These following 8 routines are used by Image BBS machine language themselves; there is little reason to call them from BASIC.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="true29-usevar"><a class="anchor" href="#true29-usevar"></a><code>&amp;,29</code> usevar</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true30-putvar"><a class="anchor" href="#true30-putvar"></a><code>&amp;,30</code> putvar</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true31-zero"><a class="anchor" href="#true31-zero"></a><code>&amp;,31</code> zero</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true32-minusone"><a class="anchor" href="#true32-minusone"></a><code>&amp;,32</code> minusone</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true33-getarr"><a class="anchor" href="#true33-getarr"></a><code>&amp;,33</code> getarr</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true34-putarr"><a class="anchor" href="#true34-putarr"></a><code>&amp;,34</code> putarr</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true35-getln"><a class="anchor" href="#true35-getln"></a><code>&amp;,35</code> getln</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true36-putln"><a class="anchor" href="#true36-putln"></a><code>&amp;,36</code> putln</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true37-trapon"><a class="anchor" href="#true37-trapon"></a><code>&amp;,37</code> trapon</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true38-trapoff"><a class="anchor" href="#true38-trapoff"></a><code>&amp;,38</code> trapoff</h3>
<hr>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This following routine is used by Image BBS machine language itself; there is little reason to call it from BASIC.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="true39-prtln"><a class="anchor" href="#true39-prtln"></a><code>&amp;,39</code> prtln</h3>
<div class="paragraph">
<p>Prints the array element <code>tt$()</code> contained in the <code>.x</code> register.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true40-forcegc"><a class="anchor" href="#true40-forcegc"></a><code>&amp;,40</code> forcegc</h3>
<div class="paragraph">
<p>Perform a garbage collection (freeing RAM by erasing unused strings).</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true41-setbaud"><a class="anchor" href="#true41-setbaud"></a><code>&amp;,41</code> setbaud</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true42-ecs-commands"><a class="anchor" href="#true42-ecs-commands"></a><code>&amp;,42</code> ECS Commands</h3>
<div class="paragraph">
<p>This group of commands are used for interfacing the Extended Command Set (ECS) with BASIC.
There are sub-commands to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>load and save the command set</p>
</li>
<li>
<p>search for and update individual commands</p>
</li>
<li>
<p><code>goto</code> or <code>gosub</code> line numbers in <code>im</code>, or modules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>&amp;,42</code> Check for ECS command</p>
</div>
<div class="paragraph">
<p>This checks whether the command passed in <code>an$</code> is a valid ECS command.</p>
</div>
<div class="paragraph">
<p><em>Example:</em>
.im
 270 f4=.:a%=zz:b%=2^ac%:&amp;,42:if a% then ef$=b$:ep$=a$:ec=a%:ec%=b%:goto 264</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>an$</code> command the user typed</p>
</div>
<div class="paragraph">
<p><code>a%</code>: Local Mode flag (<code>zz</code>)</p>
</div>
<div class="paragraph">
<p><code>ac%</code>: access level</p>
</div>
<div class="paragraph">
<p><em>Returns:</em></p>
</div>
<div class="paragraph">
<p><code>a$</code>: password</p>
</div>
<div class="paragraph">
<p><code>b$</code>:</p>
</div>
<div class="paragraph">
<p><code>a%</code>: credits to use command</p>
</div>
<div class="paragraph">
<p><code>b%</code>:</p>
</div>
<hr>
<div class="paragraph">
<p><code>&amp;,42,1</code> Goto line in ECS command</p>
</div>
<div class="paragraph">
<p><em>Parameter:</em></p>
</div>
<div class="paragraph">
<p><code>a%</code>: line number to <code>goto</code></p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="title">im</div>
<div class="content">
<pre>268 a%=asc(ef$+nl$)+256*asc(mid$(ef$,2,1)+nl$):&amp;,42,1</pre>
</div>
</div>
<div class="paragraph">
<p>From an ECS flags string <code>ef$</code>, <code>a%</code> holds the line # to <code>goto</code>, using <code>&amp;,42,1</code>.</p>
</div>
<hr>
<div class="paragraph">
<p><code>&amp;,42,2</code> Get ECS definitions from RAM</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="title">i/IM.ecs</div>
<div class="content">
<pre>4004 &amp;,42,2:n=a%:goto 4034</pre>
</div>
</div>
<div class="paragraph">
<p><em>Returns:</em></p>
</div>
<div class="paragraph">
<p><code>a%</code>: number of ECS definitions in memory</p>
</div>
<hr>
<div class="paragraph">
<p><code>&amp;,42,3</code> Put ECS definition into RAM</p>
</div>
<div class="paragraph">
<p>Add/replace the ECS definition in the <code>tt$(<em>x</em>)</code> array element to the list currently in memory.</p>
</div>
<div class="paragraph">
<p><em>Parameter:</em></p>
</div>
<div class="paragraph">
<p><code>tt$(<em>n</em>)</code>: command definition</p>
</div>
<div class="paragraph">
<p><code>&amp;,42,3,<em>number</em></code>: the number of commands in the ECS command set</p>
</div>
<div class="paragraph">
<p><em>Examples:</em></p>
</div>
<div class="literalblock">
<div class="title">i/IM.ecs</div>
<div class="content">
<pre>4010 tt$(n+1)=chr$(0):&amp;,42,3,n+1:return</pre>
</div>
</div>
<div class="paragraph">
<p><code>n</code> is the current count of ECS commands.
Assign an empty command (<code>chr$(0)</code> is a null byte) to the next command (<code>tt$(n+1)</code>).
<code>&amp;,42,3,n+1</code>: Add the empty command to the ECS command set.</p>
</div>
<hr>
<div class="paragraph">
<p><code>&amp;,42,4</code> Load ECS definitions from disk</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>a$</code>: filename</p>
</div>
<div class="paragraph">
<p><code>dv%</code>: device #</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="title">im</div>
<div class="content">
<pre>3106 a$=dr$+"e.ecs.main":&amp;,42,4</pre>
</div>
</div>
<div class="paragraph">
<p>Load the ECS definitions in <code>e.ecs.main</code> from disk.</p>
</div>
<hr>
<div class="paragraph">
<p><code>&amp;,42,5</code> Save ECS definitions to disk</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>a$</code>: filename</p>
</div>
<div class="paragraph">
<p><code>dv%</code>: device #</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="title">i/IM.ecs</div>
<div class="content">
<pre>a$=dr$+a$:&amp;,42,5:return</pre>
</div>
</div>
<hr>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
These following 9 routines are used by Image BBS machine language themselves; there is little reason to call them from BASIC.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&amp;,43	chatchk
&amp;,44	trace
&amp;,45	prtvar	[MCI on?]
&amp;,46	prtvar0 [MCI off?]
&amp;,47	carchk
&amp;,48	getkbd
&amp;,49	getmod
&amp;,50	outscn
&amp;,51	outmod outputs character in .a [peek(780)]</pre>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true52-lightbar-interface"><a class="anchor" href="#true52-lightbar-interface"></a><code>&amp;,52</code> Lightbar Interface</h3>
<div class="paragraph">
<p>This is how to read the status of lightbar checkmarks, change checkmarks&#8217; status, and move the &#8220;lit&#8221; portion to a specific location.</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,52,<em>position</em>,<em>option</em></code></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>&amp;,52,$<em>hexadecimal</em>,<em>option</em></code> is allowed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Example</em>: Turn off <strong>Trc</strong> left: <code>&amp;,52,$18,0</code> (<code>&amp;,52,24,0</code> decimal).</p>
</div>
</div>
</div>
<div class="paragraph">
<p><code>option</code>=0: clear checkmark at <em>position</em></p>
</div>
<div class="paragraph">
<p><code>option</code>=1: set checkmark at <em>position</em></p>
</div>
<div class="paragraph">
<p><code>option</code>=2: toggle checkmark at <em>position</em></p>
</div>
<div class="paragraph">
<p><code>option</code>=3: read status of <em>position</em>, return in <code>a%</code> (<code>0</code>=off, <code>1</code>=on)</p>
</div>
<div class="paragraph">
<p><code>option</code>=4: move lightbar to <em>position</em></p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true53-logoff"><a class="anchor" href="#true53-logoff"></a><code>&amp;,53</code> Logoff</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This following routine is used by Image BBS machine language itself; there is little reason to call it from BASIC.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Resets various flags:</p>
<div class="ulist">
<ul>
<li>
<p>chat page</p>
</li>
<li>
<p>sound repeat counter</p>
</li>
</ul>
</div>
</li>
<li>
<p>clears status area</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="title">im:</div>
<div class="content">
<pre>3074 &amp;,53</pre>
</div>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true54-text-editor-interface"><a class="anchor" href="#true54-text-editor-interface"></a><code>&amp;,54</code> Text editor interface</h3>
<div class="literalblock">
<div class="content">
<pre>&amp;,54,0	don't preserve text in tt$() array
&amp;,54,1	re-enter main
&amp;,54,2	re-enter, not command</pre>
</div>
</div>
<hr>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
These following 2 routines are used by Image BBS machine language themselves; there is little reason to call them from BASIC.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="true55-output"><a class="anchor" href="#true55-output"></a><code>&amp;,55</code> output</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true56-chatmode"><a class="anchor" href="#true56-chatmode"></a><code>&amp;,56</code> chatmode</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true57-relread"><a class="anchor" href="#true57-relread"></a><code>&amp;,57</code> relread</h3>
<div class="paragraph">
<p>Reads a record from a RELative file.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true58-setalarm"><a class="anchor" href="#true58-setalarm"></a><code>&amp;,58</code> setalarm</h3>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,58,<em>hour</em>,<em>minute</em></code></p>
</div>
<div class="paragraph">
<p><code>hour</code>: hour</p>
</div>
<div class="paragraph">
<p><code>minute</code>: minute</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true59-farerr"><a class="anchor" href="#true59-farerr"></a><code>&amp;,59</code> farerr</h3>
<div class="paragraph">
<p>Cause BASIC error to happen.</p>
</div>
<div class="paragraph">
<p><em>Parameter:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,59,1,<em>error</em></code></p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&amp;,59,1,14</pre>
</div>
</div>
<div class="paragraph">
<p>Cause error <code>14</code>, <code>?illegal quantity&nbsp;&nbsp;error</code>.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 3. Error Numbers</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Number</th>
<th class="tableblock halign-left valign-top">Error</th>
<th class="tableblock halign-left valign-top">Number</th>
<th class="tableblock halign-left valign-top">Error</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TOO MANY FILES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OUT OF MEMORY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FILE OPEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNDEF&#8217;D STATEMENT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FILE NOT OPEN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BAD SUBSCRIPT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FILE NOT FOUND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REDIM&#8217;D ARRAY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEVICE NOT PRESENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIVISION BY ZERO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT INPUT FILE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ILLEGAL DIRECT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT OUTPUT FILE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TYPE MISMATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MISSING FILE NAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRING TOO LONG</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ILLEGAL DEVICE NUMBER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FILE DATA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEXT WITHOUT FOR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FORMULA TOO COMPLEX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SYNTAX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CAN&#8217;T CONTINUE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RETURN WITHOUT GOSUB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNDEF&#8217;D FUNCTION</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OUT OF DATA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VERIFY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ILLEGAL QUANTITY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOAD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OVERFLOW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BREAK</p></td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="sect2">
<h3 id="true60-structures"><a class="anchor" href="#true60-structures"></a><code>&amp;,60</code> Structures</h3>
<div class="paragraph">
<p>See the <a href="#structures">Static Arrays (Structures)</a> chapter in the <em>Programming Reference Guide</em> for more information.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true61-poscrsr"><a class="anchor" href="#true61-poscrsr"></a><code>&amp;,61</code> poscrsr</h3>
<div class="paragraph">
<p>Move the terminal cursor to a specified column and row on the screen.</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,61,column,row</code></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>0,0</code> is the top left corner of the screen.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="literalblock">
<div class="title">im</div>
<div class="content">
<pre>4006 &amp;,38:&amp;,61,.,8:print"&amp;,37:goto 1812:":end</pre>
</div>
</div>
<div class="paragraph">
<p>Position the cursor at column 0, row 9 (<code>&amp;,61,0,8</code>) to print recovery information for when the BBS crashes.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true62-set-time"><a class="anchor" href="#true62-set-time"></a><code>&amp;,62</code> Set Time</h3>
<div class="paragraph">
<p>Set BBS clock.</p>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,62,<em>hour</em>,<em>minute</em></code></p>
</div>
<div class="paragraph">
<p><code>hour</code>: hour</p>
</div>
<div class="paragraph">
<p><code>minute</code>: minute</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="title">im:</div>
<div class="content">
<pre>3184 &amp;,62,h,m</pre>
</div>
</div>
<hr>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
These following 3 routines are used by Image BBS machine language themselves; there is little reason to call them from BASIC.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="true63-inline1"><a class="anchor" href="#true63-inline1"></a><code>&amp;,63</code> inline1</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true64-convstr"><a class="anchor" href="#true64-convstr"></a><code>&amp;,64</code> convstr</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true65-convert"><a class="anchor" href="#true65-convert"></a><code>&amp;,65</code> convert</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true66-calculated-goto"><a class="anchor" href="#true66-calculated-goto"></a><code>&amp;,66</code> Calculated GOTO</h3>
<div class="paragraph">
<p><code>goto</code> line number held in <code>a%</code>.
If you have 14 <code>goto</code> targets on a line, this can save a fair amount of RAM (and BASIC interpretation time).</p>
</div>
<div class="paragraph">
<p><code>a%</code>: line number to <code>goto</code></p>
</div>
<div class="paragraph">
<p>Instead of writing:</p>
</div>
<div class="paragraph">
<p><code>on a% goto 3000,3100,3200,3300,3400,3500,3600,3700,3800,3900,4000,4100,4200,4300</code> (79 bytes)</p>
</div>
<div class="paragraph">
<p>The same thing can be written like so:</p>
</div>
<div class="paragraph">
<p><code>a%=3:a%=a%*100+3000:&amp;,66</code> (24 bytes)</p>
</div>
<div class="paragraph">
<p>to go to line 3200.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="true661-mlgosub"><a class="anchor" href="#true661-mlgosub"></a><code>&amp;,66,1</code> mlgosub</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true67-copyrite"><a class="anchor" href="#true67-copyrite"></a><code>&amp;,67</code> copyrite</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true68-struct"><a class="anchor" href="#true68-struct"></a><code>&amp;,68</code> struct</h3>
<hr>
</div>
<div class="sect2">
<h3 id="true69-display-string-on-console"><a class="anchor" href="#true69-display-string-on-console"></a><code>&amp;,69</code> Display String on Console</h3>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,69,<em>column</em>,<em>row</em>,<em>text</em>,<em>color</em></code></p>
</div>
<div class="paragraph">
<p><code>column</code>: <code>0-39</code></p>
</div>
<div class="paragraph">
<p><code>row</code>: <code>0-24</code></p>
</div>
<div class="paragraph">
<p><code>text</code>: <code>a$</code>, <code>"Hi there!"</code>, or <code>"Hi there, "+a$+"!"</code></p>
</div>
<div class="paragraph">
<p><code>color</code>: is <code>1-15</code> for un-reversed colors.
For reversed colors, add <code>$80</code> (or</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Upper left of the screen starts at column 0, row 0.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function will not draw PETSCII graphics characters properly.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Example</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&amp;,69,4,21,left$(" "+cm$+"{21 spaces}",22),$8c</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p><code>&amp;,69,4,21</code> position string at column 5, row 22</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><code>left$(" "+cm$+"{21 spaces}",22)</code> formats the string so it&#8217;s left-justified in the 22-character <code>Area</code> window</p>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><code>$8c</code> draws the string in reverse (<code>$8</code>) in color <code>$c</code> (decimal 13, light green)</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The module <code>sub.display</code> is a good example of using <code>&amp;,69</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Upper left corner of the screen is <code>0,0</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>column</code>: <code>0-39</code></p>
</div>
<div class="paragraph">
<p><code>row</code>: <code>0-24</code></p>
</div>
<div class="paragraph">
<p><code>color</code>: <code>1-15</code>, same as the MCI colors (black, <code>0</code>, is excluded).
<code>$8x</code> is reverse color <em>x</em> (<code>$81</code> is reverse white, <code>$8f</code> is reverse light gray).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Question</dt>
<dd>
<p>Will this plot stuff to the screen mask area when in full screen mode? I&#8217;m pretty sure it does.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="position-cursor"><a class="anchor" href="#position-cursor"></a><code>&amp;,70</code> Position terminal cursor</h3>
<div class="paragraph">
<p><em>Parameters</em>:</p>
</div>
<div class="paragraph">
<p><code>&amp;,70,<em>column</em>,<em>row</em></code></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Upper left corner of the screen is <code>0,0</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>column</code>: 0-39</p>
</div>
<div class="paragraph">
<p><code>row</code>: 0-24</p>
</div>
<div class="literalblock">
<div class="title">i.IM</div>
<div class="content">
<pre>&amp;,70,.,n/2+8.5:&amp;"{white}"</pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Fancy Title</div>
<div class="paragraph">
<div class="title">Question for the Ages:</div>
<p>What is the difference between <code>&amp;,61 (poscrsr)</code> and <code>&amp;,70 (cursposn)</code>?</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="structures"><a class="anchor" href="#structures"></a>Static Arrays (Structures)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Structures</em> (or <em>structs</em>) allow you to treat the memory used by arrays as blocks of memory.
You can store multiple types of data in this memory, and perform operations on the data using <code>&amp;,60</code> and various sub-commands.
This is much faster than a BASIC <code>for&#8230;&#8203;next</code> loop.</p>
</div>
<div class="paragraph">
<p>There are functions to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>put and get strings, and Image-formatted 11-digit dates</p>
</li>
<li>
<p>sort and filter data</p>
</li>
<li>
<p>collect information from one structure, and put the results in another array</p>
</li>
<li>
<p>load and save structures</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>FIXME: more functions</mark></p>
</div>
<div class="paragraph">
<p><em>Elements</em> are the individual &#8220;boxes&#8221; in the array that data is held in.</p>
</div>
<div class="paragraph">
<p>Strings can be stored in either a floating point or integer array.
Two bytes per element of the string text can be stored per element of an integer array.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 4. Representation of Sample 2D Integer Array</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(0,0)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(0,1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(0,2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(1,0)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(1,1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(1,2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(2,0)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(2,1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>x%(2,2)</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It is suggested that you use numeric type arrays, since this will allow you to access the elements as numeric data, as well as put and get strings.</p>
</div>
<div class="paragraph">
<p>Floating point arrays (like <code>a()</code> or <code>b()</code>) use 5 bytes per element.
Integer arrays (like <code>a%()</code> or <code>b%()</code>) use 2 bytes per element.
When deciding to use structures, you should determine what types of data you will need to store, and how much memory that data will require.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>As a running example, let&#8217;s design a structure to hold a user’s ID#, handle, and password.
A module will be written to store, edit, and retrieve data to/from this structure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The ID is an integer type (never &gt; 32767), requiring 2 bytes.</p>
</li>
<li>
<p>The handle can be up to 20 characters.</p>
</li>
<li>
<p>The password can be up to 15 characters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since the integers store in 2 bytes, the total number of bytes needed is 37 (2 + 20 + 15).
Thirty-seven bytes would require either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>19 integer elements (2 bytes per element &times; 19 elements  &equals; 38 bytes)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>or</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>8 floating point elements (5 bytes per element &times; 8 elements  &equals; 40 bytes).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now that you have the basic concept of the structure, let’s look in a little more detail.
Here is a byte-by-byte map of the structure we designed.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 5. Sample Structure layout</caption>
<colgroup>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element Position</th>
<th class="tableblock halign-left valign-top">Byte Position</th>
<th class="tableblock halign-left valign-top">Data</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Bytes Used</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bytes 00-01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID#</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bytes 02-21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element 11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bytes 22-36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element 18½</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte 37</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unused</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>n/a</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 byte</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 6. Structure Data Storage</caption>
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Element</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,0)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,1)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,2)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,3)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,4)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,5)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,6)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,7)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,8)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,9)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Byte&nbsp;Pos</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>00&nbsp;01</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>02&nbsp;03</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>04&nbsp;05</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>06&nbsp;07</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>08&nbsp;09</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>10&nbsp;11</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>12&nbsp;13</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>14&nbsp;15</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>16&nbsp;17</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>18&nbsp;19</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>20&nbsp;21</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Data</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">ID#</p></td>
<td class="tableblock halign-center valign-top" colspan="10"><p class="tableblock">Handle <em>(20 bytes)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Bytes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>0 1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>P I</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>N A</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>C O</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>L A</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>D A</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x x</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x x</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x x</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x x</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x x</em></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Element</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,11)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,12)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,13)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,14)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,15)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,16)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>u%(0,17)</code></p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><code>u%(0,18)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Byte&nbsp;Pos</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>22&nbsp;23</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>24&nbsp;25</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>26&nbsp;27</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>28&nbsp;29</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>30&nbsp;31</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>32&nbsp;33</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>34&nbsp;35</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>36</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>37</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Data</p></td>
<td class="tableblock halign-center valign-top" colspan="8"><p class="tableblock">Password <em>(15 bytes)</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>unused</em></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Bytes</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>P A</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>S S</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>W O</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>R D</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x x</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x x</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x x</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>x</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>unused</em></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Because the unused byte 37 is <em>not</em> on an even element boundary (the previous element is an odd number of bytes), it cannot be used.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since the ID# is an integer anyway, it would be best to use an integer array.
The definition would look like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>dim u%(18)</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Remember that arrays start at element 0!
There are 19 bytes in this structure, 0-18.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Of course, you may want to store more than one of these structures in memory.
To do so, you would need a 2-dimensional array.  This would change the <code>dim</code> statement to:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>dim u%(18,x-1)</pre>
</div>
</div>
<div class="paragraph">
<p>(Suppose that <em>x</em> is the number of structures you want.)</p>
</div>
</div>
</div>
<div class="paragraph">
<p>To refer to bytes in a structure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the first number in the array notation is the <em>element number</em> (like a field of a record in a RELative file)</p>
</li>
<li>
<p>the second number is the <em>byte number</em>.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Element number <code>0</code> and byte number <code>0</code> (<em>e.g.</em>, <code>u%(0,0)</code>) is often used to hold the number of elements in the structure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now down to the important part: how to use all of this!
The structure system is called with either <code>&amp;,60,<em>x</em>,&#8230;&#8203;</code> or <code>&amp;,68,<em>x</em>,&#8230;&#8203;</code>.</p>
</div>
<div class="paragraph">
<p>There are currently 14 sub-functions supported by the structure routines.
They are documented below.</p>
</div>
<div class="sect2">
<h3 id="truenumeric-values-and-structures"><a class="anchor" href="#truenumeric-values-and-structures"></a>Numeric Values and Structures</h3>
<div class="paragraph">
<p>The array used with structures is either an integer or floating point type.
To put numeric values into&#8212;&#8203;or get numeric values from&#8212;&#8203;a structure requires no special structure calls.</p>
</div>
<div class="paragraph">
<p>You may use code similar to the following examples:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 7. Get number from and put number into structure</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Get value</th>
<th class="tableblock halign-left valign-top">Put value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f=a%(3,3)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a%(3,3)=20</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Integer arrays can store values from <code>-32767</code> to <code>32768</code>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="trueput-string"><a class="anchor" href="#trueput-string"></a>Put String</h3>
<div class="paragraph">
<p>Sub-function <code>0</code> copies a string variable into a structure.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,0,<em>bytes</em>,<em>array()</em>,<em>string$</em></code></p>
</div>
<div class="paragraph">
<p><em>bytes</em>: how many bytes to request from the structure.</p>
</div>
<div class="paragraph">
<p><em>array()</em>: the array name assigned to the structure you&#8217;re reading the string from.</p>
</div>
<div class="paragraph">
<p><em>string$</em>: the string name to read the structure data into.</p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>&amp;,60,0,20,u%(1,1),na$</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Put a string:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code><strong>&amp;,60,0</strong>,20,u%(1,1),na$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>of 20 bytes:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,0,<strong>20</strong>,u%(1,1),na$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>from the <code>u%()</code> array (element 1, record 1):</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,0,20,<strong>u%(1,1)</strong>,na$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>into the string variable <code>na$</code>:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,0,20,u%(11,2),<strong>na$</strong></code></p>
</div>
</div>
<div class="sect2">
<h3 id="trueget-string"><a class="anchor" href="#trueget-string"></a>Get String</h3>
<div class="paragraph">
<p>Sub-function 1 copies a string from a structure into a string variable.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,1,<em>bytes</em>,<em>array()</em>,<em>string$</em></code></p>
</div>
<div class="paragraph">
<p>The parameters <em>bytes</em>, <em>array()</em>, and <em>string$</em> are the same as <code>Put String</code> above.</p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>&amp;,60,1,20,u%(11,2),a$</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Get a string</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code><strong>&amp;,60,1</strong>,20,u%(11,2),a$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>of 20 bytes</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,1,<strong>20</strong>,u%(11,2),a$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>from array <code>u%</code> (element 11, byte 2)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,1,20,<strong>u%(11,2)</strong>,a$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>into <code>a$</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,1,20,u%(11,2),<strong>a$</strong></code></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>In our earlier example user data structure, to access the third user’s password, you would:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>get a string:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code><strong>&amp;,60,1</strong>,20,u%(11,2),a$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>of 20 bytes:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,1,<strong>20</strong>,u%(11,2),a$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>from the <code>u%</code> array (element 11, byte 2):</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,1,20,<strong>u%(11,2)</strong>,a$</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>into the string variable <code>a$</code>:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,1,20,u%(11,2),<strong>a$</strong></code></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueload-structure-from-disk"><a class="anchor" href="#trueload-structure-from-disk"></a>Load structure from disk</h3>
<div class="paragraph">
<p>Sub-function 2 loads the specified structure on disk into an array.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,2,0,<em>array()</em>,<em>filename$</em>,<em>device</em></code></p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>&amp;,60,2,0,u%(0,0),dr$+"u.handles",dv%</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You do not have to load the file at the start of the array.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code><strong>&amp;,60,2,0,</strong>u%(0,0),dr$+"u.handles",dv%</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Load a structure:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code><strong>&amp;,60,2,0</strong>,u%(0,0),dr$+"u.handles",dv%</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>0</code> is believed to be a necessary but ignored parameter.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Use the <code>u%()</code> array(element 0, byte 0):</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,2,0,<strong>u%(0,0)</strong>,dr$+"u.handles",dv%</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Use the drive prefix <code>dr$</code>, plus the fictitious <code>"u.handles"</code> filename:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,2,0,u%(0,0),<strong>dr$+"u.handles"</strong>,dv%</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><code>dv%</code> is the device number to load the structure from:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,2,0,u%(0,0),dr$+"u.handles",<strong>dv%</strong></code></p>
</div>
</div>
<div class="sect2">
<h3 id="truesave-a-structure-to-disk"><a class="anchor" href="#truesave-a-structure-to-disk"></a>Save a structure to disk</h3>
<div class="paragraph">
<p>Sub-function 3 saves a structure to a specified disk file.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,3,0,<em>array()</em>,<em>bytes</em>,<em>filename$</em>,<em>device</em></code></p>
</div>
<div class="paragraph">
<p>The parameters <em>array()</em>, <em>bytes</em>, and <em>filename$</em> are the same as usual.</p>
</div>
<div class="paragraph">
<p><em>device</em> should be gotten with:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>dr=6:gosub 3</pre>
</div>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>&amp;,60,3,0,u%(0,0),3*38,dr$+"u.handles",dv%</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>Save a structure:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code><strong>&amp;,60,3,0</strong>,u%(0,0),3*38,dr$+"u.handles",dv%</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>The starting element is specified with <em>array()</em>:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,3,0,<strong>u%(0,0)</strong>,3*38,dr$+"u.handles",dv%</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><em>bytes</em>: the number of bytes per structure, multiplied by the number of structures (3 structures &times; 38 bytes in the example):</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,3,0,u%(0,0),<strong>3*38</strong>,dr$+"u.handles",dv%</code></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>drive prefix <code>dr$</code> + filename (the theoretical <code>u.handles</code>):</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>&amp;,60,3,0,u%(0,0),3*38,<strong>dr$+"u.handles"</strong>,dv%</code></p>
</div>
</div>
<div class="sect2">
<h3 id="trueput-date"><a class="anchor" href="#trueput-date"></a>Put Date</h3>
<div class="paragraph">
<p>Put an 11-digit date into a structure (stored in Binary Coded Decimal).</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,4,0,<em>array(a,b)</em>,<em>string$</em></code></p>
</div>
<div class="paragraph">
<p><em>array(a,b)</em>: array name(<code>a</code>=starting structure, <code>b</code>=starting byte)</p>
</div>
<div class="paragraph">
<p><em>string$</em>: the 11-digit date string</p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>an$="10412208234":&amp;,60,4,0,u%(3,0),an$</pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<div class="title">Details: Binary Coded Decimal</div>
<p>Structs store an 11-digit date in 3 bytes using Binary Coded Decimal (BCD) format.
Two decimal digits are stored per byte, using the high and low <em>nybbles</em> (i.e., two 4-bit halves of an 8-bit number).</p>
</div>
<div class="literalblock">
<div class="content">
<pre>an$="10412208234":&amp;,60,4,0,u%(0,1),an$</pre>
</div>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Element</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><code>u%(0,1)</code></p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><code>u%(0,2)</code></p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><code>u%(0,3)</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><em>unused</em></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Binary</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>%0001&nbsp;%0000</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>%0100&nbsp;%0001</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>%0010&nbsp;%0010</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>%0000&nbsp;%1000</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>%0010&nbsp;%0011</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>%0100</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>%xxxx</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>&nbsp;&nbsp;&nbsp;&nbsp;x</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueget-date"><a class="anchor" href="#trueget-date"></a>Get Date</h3>
<div class="paragraph">
<p>Get an 11-digit date from structure.
The date is stored in Binary Coded Decimal (BCD) format as shown above.</p>
</div>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,5,0,<em>array(a,b)</em>,<em>string$</em></code></p>
</div>
<div class="paragraph">
<p><em>array(a,b)</em>: array name(<code>a</code>=starting structure, <code>b</code>=starting byte)</p>
</div>
<div class="paragraph">
<p><em>string$</em>: string name</p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>&amp;,60,5,0,u%(0,1),an$:&amp;,15:&amp;an$</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>&amp;,60,5,0,u%(0,1),an$</code>: Get a date from the struct into <code>an$</code>.</p>
</li>
<li>
<p><code>&amp;,15</code>: convert <code>an$</code> into a long date string.</p>
</li>
<li>
<p><code>&amp;an$</code>: display the long date string.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="truescan-structures"><a class="anchor" href="#truescan-structures"></a>Scan Structures</h3>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,6,<em>num</em>,<em>bits</em>,<em>a(a,b)</em>,<em>b(a,b)</em>,<em>size</em>,<em>command</em>,<em>test</em></code></p>
</div>
<div class="paragraph">
<p><em>num</em>: # of structures to scan</p>
</div>
<div class="paragraph">
<p><em>bits</em>: the bits to set if true</p>
</div>
<div class="paragraph">
<p><em>a(a,b)</em>: starting flags(<em>element</em>,<em>byte</em>)</p>
</div>
<div class="paragraph">
<p><em>b(a,b)</em>: starting object(<em>element</em>,<em>byte</em>)</p>
</div>
<div class="paragraph">
<p><em>size</em>: size in bytes of struct</p>
</div>
<div class="paragraph">
<p><em>command</em>: command number:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>0: 2 byte and, &lt;&gt;0
1: 2 byte and, ==0
2: 2 byte cmp, &lt;
3: 2 byte cmp, &gt;=
4: date cmp, &lt;
5: date cmp, &gt;=</pre>
</div>
</div>
<div class="paragraph">
<p><em>test</em>: the object to test for
(apparently can be either a variable or a number, maybe the array number?)</p>
</div>
<div class="paragraph">
<div class="title">Example: <code>i.UD</code> from Image 2.0</div>
<p>The following code scans the U/D directory for entries which have an upload date older than <code>ld$</code>, (setting <code>$4f</code> on <code>ud%(0,1)</code> if the entry matches):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>3950 &amp;,60,6,rn,$4f,ud%(0,1),ud%(3,1),60,4,ld$:b%=a%</pre>
</div>
</div>
<div class="paragraph">
<p><em>&amp;,60,6</em>: scan struct</p>
</div>
<div class="paragraph">
<p><em>rn</em>: record number, how many structures to scan in the directory</p>
</div>
<div class="paragraph">
<p><em>$4f</em>: <code>%01001111</code> in binary, <mark>FIXME</mark> still researching the purpose of this</p>
</div>
<div class="paragraph">
<p><em>ud%(0,1)</em>: <mark>FIXME</mark></p>
</div>
<div class="paragraph">
<p><em>ud%(3,1)</em>: Upload date</p>
</div>
<div class="paragraph">
<p><em>60</em>: structure size, in bytes</p>
</div>
<div class="paragraph">
<p><em>4</em>: date comparison, <code>&lt;</code> (less than)</p>
</div>
<div class="paragraph">
<p><em>ld$</em>: last call date (the comparison object).
Can apparently be a string name, or number of an array?</p>
</div>
<div class="paragraph">
<div class="title">Returns</div>
<p><code>a%</code>: count of structures that the comparison returns as matching <code>test</code>.</p>
</div>
<div class="paragraph">
<p><code>b(a,b)</code>: the structure containing the comparisons matching <code>test</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="truesort"><a class="anchor" href="#truesort"></a>Sort</h3>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,7,0,<em>a(a,b)</em>,<em>start?</em></code></p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>&amp;,60,7,0,a$(p+1,i),n-p</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truescan-numbers"><a class="anchor" href="#truescan-numbers"></a>Scan Numbers</h3>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,8,<em>num</em>,<em>size</em>,<em>acs</em>,<em>a(a,b)</em>,<em>a%(a)</em>,<em>start</em></code></p>
</div>
<div class="paragraph">
<p><em>num</em>: number of structures to scan</p>
</div>
<div class="paragraph">
<p><em>size</em>: size of the structure, in bytes</p>
</div>
<div class="paragraph">
<p><em>acs</em>: access level to filter results by</p>
</div>
<div class="paragraph">
<p><em>a(a,b)</em>: the structure to scan</p>
</div>
<div class="paragraph">
<p><em>a%(a)</em>: the structure to put the results in? <mark>FIXME</mark></p>
</div>
<div class="paragraph">
<p><em>start</em>: element to start scanning at</p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>&amp;,60,8,rn,60,a,ud%(0,1),f%(1),1:f%(0)=a%</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Returns</div>
<p><code>a%</code>: <mark>FIXME</mark></p>
</div>
<div class="paragraph">
<p><code>a%(a)</code>: <mark>FIXME</mark></p>
</div>
</div>
<div class="sect2">
<h3 id="truescan-sum"><a class="anchor" href="#truescan-sum"></a>Scan Sum</h3>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,9,<em>num</em>,<em>size</em>,<em>a(a,b)</em></code></p>
</div>
<div class="paragraph">
<p><em>num</em> number of structures to scan</p>
</div>
<div class="paragraph">
<p><em>size</em> size of structure</p>
</div>
<div class="paragraph">
<p><code>a(a,b)</code> structure(<em>element</em>,<em>byte</em>) to scan</p>
</div>
<div class="paragraph">
<div class="title">Returns</div>
<p><code>a%</code> <mark>FIXME</mark></p>
</div>
</div>
<div class="sect2">
<h3 id="truecopy-structure"><a class="anchor" href="#truecopy-structure"></a>Copy Structure</h3>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,10,<em>size</em>,<em>a1(a,b)</em>,<em>a2(a,b)</em></code></p>
</div>
<div class="paragraph">
<p><code>size</code> size of structure</p>
</div>
<div class="paragraph">
<p><code>a1(a,b)</code> source structure</p>
</div>
<div class="paragraph">
<p><code>a2(a,b)</code> destination structure</p>
</div>
<div class="literalblock">
<div class="title">Example</div>
<div class="content">
<pre>4326 if x&lt;&gt;fb%(.,.) then for a=x to fb%(.,.)-1:&amp;,60,10,60,fb%(.,a+1),fb%(.,a):next</pre>
</div>
</div>
<div class="paragraph">
<p>Copy structure <code>a+1</code> to structure <code>a</code> in a loop.</p>
</div>
</div>
<div class="sect2">
<h3 id="truescan-for-string"><a class="anchor" href="#truescan-for-string"></a>Scan for String</h3>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,11,<em>num</em>,<em>size</em>,<em>op</em>,<em>str</em>,<em>a1(a,b)</em>,<em>a2(b)</em>,<em>start</em></code></p>
</div>
<div class="paragraph">
<p><em>num</em></p>
</div>
<div class="paragraph">
<p><code>size</code> size of structure</p>
</div>
<div class="paragraph">
<p><code>op</code></p>
</div>
<div class="paragraph">
<p><code>str</code></p>
</div>
<div class="paragraph">
<p><code>a1(a,b)</code> source structure to scan</p>
</div>
<div class="paragraph">
<p><code>a2(b)</code> target structure to put results into</p>
</div>
<div class="paragraph">
<p><code>start</code></p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 8. Arrays used by <code>Scan String</code></caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Number</th>
<th class="tableblock halign-left valign-top">Array</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tt$()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">editor text array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bb$()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dt$()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ed$()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nn$()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a%()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c%()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d%()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>e%()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>f%()</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ac%()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">access info</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>so%()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">subops</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="truegame-scan"><a class="anchor" href="#truegame-scan"></a>Game Scan</h3>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,12,count,size,a$,a%(a,b),b$</code></p>
</div>
</div>
<div class="sect2">
<h3 id="truetext-read"><a class="anchor" href="#truetext-read"></a>Text Read</h3>
<div class="paragraph">
<div class="title">Syntax</div>
<p><code>&amp;,60,13,number,reclen,scan(),bits,text(),strlen</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truevariables"><a class="anchor" href="#truevariables"></a>Variables</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="trueinteger"><a class="anchor" href="#trueinteger"></a>Integer</h3>

</div>
<div class="sect2">
<h3 id="truefloating-point"><a class="anchor" href="#truefloating-point"></a>Floating Point</h3>

</div>
<div class="sect2">
<h3 id="truestring"><a class="anchor" href="#truestring"></a>String</h3>

</div>
<div class="sect2">
<h3 id="truearrays"><a class="anchor" href="#truearrays"></a>Arrays</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="truepokes"><a class="anchor" href="#truepokes"></a>POKEs</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>POKE</code>s could go away in favor of <code>&amp;,20</code> (interface read) and <code>&amp;,21</code> (interface write) commands.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truemachine-language-routines"><a class="anchor" href="#truemachine-language-routines"></a>Machine Language Routines</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="trueprotocols"><a class="anchor" href="#trueprotocols"></a>Protocols</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section is currently undergoing research.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truegraphic-menu"><a class="anchor" href="#truegraphic-menu"></a>Graphic Menu</h4>
<div class="paragraph">
<p>The ML module <code>++ menu2</code> handles adding menu items, hot keys, displaying the menu and passing the menu item selected back to BASIC.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&amp;,16,0</code>: </dt>
<dd>
<p>Add string</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Syntax:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,16,0,<em>?</em>,<em>item_count?</em>,<em>"hotkey(s)"</em>,<em>"prefix_text?"</em>,<em>"item_text"</em></code></p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="title">i.GF:</div>
<div class="content">
<pre>3518 if pf&gt;1 then:&amp;,16,0,42,q%(0,n),"/B","Op ","Return to Previous Menu":n=n+1</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&amp;,16,1</code>: </dt>
<dd>
<p>Add string</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Syntax:</em>
None yet.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&amp;,16,2</code>: </dt>
<dd>
<p>Use menu</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Parameters:</em></p>
</div>
<div class="paragraph">
<p><code>&amp;,16,2,<em>?</em>,<em>?</em>,<em>item_count</em>,<em>?</em>,<em>?</em>,<em>item_count</em>,<em>?</em>,<em>?</em>,<em>?</em></code></p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>xxxx &amp;,16,2,42,q%(0,0),n,36,1,n,6,6,0:a$=chr$(q%(3,a%) and 255)</pre>
</div>
</div>
<div class="paragraph">
<p><em>Returns:</em></p>
</div>
<div class="paragraph">
<p><code>a%</code>: item number selected</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&amp;,16,3</code>: </dt>
<dd>
<p>Use Menu</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truelightbar-reference"><a class="anchor" href="#truelightbar-reference"></a>Lightbar Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truelightbar-numbering"><a class="anchor" href="#truelightbar-numbering"></a>Lightbar Numbering</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Lightbar, page 1</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Sys</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Acs</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Loc</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Tsr</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Cht</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>New</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Prt</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>U/D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">00&nbsp;01</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">02&nbsp;03</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">04&nbsp;05</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">06&nbsp;07</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">08&nbsp;09</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">10&nbsp;11</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">12&nbsp;13</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">14&nbsp;15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">$00&nbsp;01</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">02&nbsp;03</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">04&nbsp;05</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">06&nbsp;07</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">08&nbsp;09</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0a&nbsp;0b</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0c&nbsp;0d</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0e&nbsp;0f</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Lightbar, page 2</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Asc</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Ans</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Exp</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Unv</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Trc</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Bel</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Net</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Mac</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">16&nbsp;17</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">18&nbsp;19</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">20&nbsp;21</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">22&nbsp;23</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">24&nbsp;25</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">26&nbsp;27</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">28&nbsp;29</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">30&nbsp;31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">$10&nbsp;11</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">12&nbsp;13</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">14&nbsp;15</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">16&nbsp;17</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">18&nbsp;19</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1a&nbsp;1b</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1c&nbsp;1d</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1e&nbsp;1f</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Lightbar, page 3</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Chk</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Mor</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Frd</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Sub</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Res</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Mnt</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Mnu</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Xpr</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32&nbsp;33</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">34&nbsp;35</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">36&nbsp;37</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">38&nbsp;39</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">40&nbsp;41</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">42&nbsp;43</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">44&nbsp;45</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">46&nbsp;47</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">$20&nbsp;21</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">22&nbsp;23</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">24&nbsp;25</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">26&nbsp;27</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">28&nbsp;29</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2a&nbsp;2b</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2c&nbsp;2d</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2e&nbsp;2f</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Lightbar, page 4</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Em3</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Sc2</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Scp</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Alt</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>Trb</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>DCD</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>DSR</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$3e</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">48&nbsp;49</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">50&nbsp;51</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">52&nbsp;53</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">54&nbsp;55</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">56&nbsp;57</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">58&nbsp;59</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">60&nbsp;61</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">62&nbsp;63</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">$30&nbsp;31</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">32&nbsp;33</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">34&nbsp;35</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">36&nbsp;37</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">38&nbsp;39</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">3a&nbsp;3b</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">3c&nbsp;3d</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">3e&nbsp;3f</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Lightbar, page 5</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$40</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$42</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$44</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$46</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$48</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$4a</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$4c</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$4e</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">64&nbsp;65</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">66&nbsp;67</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">68&nbsp;69</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">70&nbsp;71</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">72&nbsp;73</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">74&nbsp;75</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">76&nbsp;77</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">78&nbsp;79</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">$40&nbsp;41</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">42&nbsp;43</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">44&nbsp;45</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">46&nbsp;47</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">48&nbsp;49</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4a&nbsp;4b</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4c&nbsp;4d</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4e&nbsp;4f</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Lightbar, page 6</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$50</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$52</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$54</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$56</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$58</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$5a</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$5c</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$5e</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">80&nbsp;81</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">82&nbsp;83</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">84&nbsp;85</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">86&nbsp;87</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">88&nbsp;89</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">90&nbsp;91</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">92&nbsp;93</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">94&nbsp;95</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">$50&nbsp;51</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">52&nbsp;53</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">54&nbsp;55</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">56&nbsp;57</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">58&nbsp;59</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">5a&nbsp;5b</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">5c&nbsp;5d</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">5e&nbsp;5f</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Lightbar, page 7</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$60</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$62</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$64</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$66</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$68</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$6a</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$6c</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>$6e</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">96&nbsp;97</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">98&nbsp;99</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">100&nbsp;101</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">102&nbsp;103</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">104&nbsp;105</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">106&nbsp;107</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">108&nbsp;109</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">110&nbsp;111</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">$60&nbsp;61</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">62&nbsp;63</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">64&nbsp;65</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">66&nbsp;67</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">68&nbsp;69</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">6a&nbsp;6b</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">6c&nbsp;6d</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">6e&nbsp;6f</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Lightbar, page 8</caption>
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Title</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>At1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>At2</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>At3</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>At4</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>At5</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>At6</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>At7</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>At8</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">112&nbsp;113</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">114&nbsp;115</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">116&nbsp;117</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">118&nbsp;119</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">120&nbsp;121</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">122&nbsp;123</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">124&nbsp;125</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">126&nbsp;127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hex</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">$70&nbsp;71</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">72&nbsp;73</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">74&nbsp;75</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">76&nbsp;77</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">78&nbsp;79</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">7a&nbsp;7b</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">7c&nbsp;7d</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">7e&nbsp;7f</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="truelightbar-interface-52"><a class="anchor" href="#truelightbar-interface-52"></a>Lightbar Interface: <code>&amp;,52</code></h3>
<div class="sect3">
<h4 id="ampersand-lightbar"><a class="anchor" href="#ampersand-lightbar"></a>BASIC <code>&amp;,52</code> Commands</h4>
<div class="paragraph">
<p><code>&amp;,52,<em>position</em>,<em>mode</em></code></p>
</div>
<div class="paragraph">
<p><code>position</code> ranges from 0-127 decimal ($00-$7f hexadecimal--<code>&amp;,52,$30,0</code>, for example, is allowed).</p>
</div>
<div class="paragraph">
<p><code>mode</code> is 0-4 as used by BASIC.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">clear checkmark at <em>position</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set checkmark at <em>position</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">toggle checkmark at <em>position</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read checkmark at <em>position</em>, return status in <code>a%</code>: 0=off, 1=on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">move &#8220;lit&#8221; portion of lightbar to position 0-55 [<mark>FIXME</mark>: or 1-56?]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="trueassembly-example"><a class="anchor" href="#trueassembly-example"></a>Assembly Example</h4>
<div class="paragraph">
<p><mark>FIXME</mark></p>
</div>
<div class="paragraph">
<p>Mode 5 is reserved for use by ML routines, and is the equivalent of <code>&amp;,52,<em>x</em>,3</code> in BASIC. <code>ldx</code> with the flag to check, <code>jsr chkflags</code>, and the result (0 or 1) is returned in <code>.a</code>.</p>
</div>
<div class="listingblock">
<div class="title">checkflag.asm</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="6502" class="language-6502 hljs">ldx #$04	; lightbar flag number
jsr chkflag	; returns flag status (0=off, 1=on) in .a
bne flag_on
beq flag_off</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truememory-map"><a class="anchor" href="#truememory-map"></a>Memory Map</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Author: Ray Kelm</p>
</div>
<div class="paragraph">
<p>During boot (contents of the ML file):</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Memory range</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$6C00</code> - <code>$6FFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wedge code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$7000</code> - <code>$7FFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">editor code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$8000</code> - <code>$83FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">garbage collector</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$8400</code> - <code>$8DFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ECS code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$8E00</code> - <code>$93FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">struct code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$9400</code> - <code>$97FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>swap1</code> code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$9800</code> - <code>$9BFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>swap2</code> code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$9C00</code> - <code>$9FFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>swap3</code> code</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Everything after this point is the same as the next section.</p>
</div>
<div class="paragraph">
<p>While running:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Memory range</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0800</code>-<code>$0AFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RS232 driver</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0B00</code>-<code>$0B7F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RS232 input buffer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0B80</code>-<code>$0BFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RS232 output buffer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0C00</code>-<code>$0FFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BASIC wedge</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1000</code>-<code>$12FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">temporary screen data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1300</code>-<code>$130F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chktbl</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1310</code>-<code>$13CF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bartbl</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$13D0</code>-<code>$13DF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">array pointers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$13E0</code>-<code>$13EC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">days per month</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$13ED</code>-<code>$13EF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unused</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$13F0</code>-<code>$144F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sounds</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1450</code>-<code>$147F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">net alarms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1480</code>-<code>$14FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCII to CBM translation table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1500</code>-<code>$15FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CBM to ASCII translation table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1600</code>-<code>$161F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblcta1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1620</code>-<code>$163F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblcta2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1640</code>-<code>$165F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tblcta3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1660</code>-<code>$16E0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$16E0</code>-<code>$16FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">date buffer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1700</code>-<code>$1718</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lobytes</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1719</code>-<code>$1731</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hibytes</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1732</code>-<code>$174A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lobytec</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$174B</code>-<code>$1763</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hibytec</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1764</code>-<code>$177F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unused</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1780</code>-<code>$17FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pmodetbl</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$1800</code>-<code>$27FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">editor execution location (swapped in when needed)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$2800</code>-<code>$9FFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BASIC program area</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$A000</code>-<code>$BFFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BASIC ROM / Image ML routines in RAM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$C000</code>-<code>$CAFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8220;Protocol&#8221; block for loadable ML code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$CB00</code>-<code>$CCFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">swapper area</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$CD00</code>-<code>$CDFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">interface page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$CE00</code>-<code>$CDFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">buffer page</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$CF00</code>-<code>$CFFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">???</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$D000</code>-<code>$DFFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I/O memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$D000</code>-<code>$DFFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character ROM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$D000</code>-<code>$DFFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">editor swap location (code is here when waiting to run)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$E000</code>-<code>$FFFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KERNAL ROM / Image ML &#8220;swap&#8221; code in ROM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$E000</code>-<code>$E3FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">garbage collector swap module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$E400</code>-<code>$EDFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ECS swap module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$EE00</code>-<code>$F3FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Struct swap module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$F400</code>-<code>$F7FF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap1 swap module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$F800</code>-<code>$FBFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap2 swap module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$FC00</code>-<code>$FFFF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Swap3 swap module</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="truefile-formats"><a class="anchor" href="#truefile-formats"></a>File Formats</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="trueintroduction-2"><a class="anchor" href="#trueintroduction-2"></a>Introduction</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<div class="title">Option Lists</div>
<p>To show when options are mutually exclusive (there can be only one option chosen from a group), the following notation is used:</p>
</div>
<div class="paragraph">
<p>[ <em>option 1</em> | <em>option 2</em> | <em>option 3</em> ]</p>
</div>
<div class="paragraph">
<p>means that of the three options presented, option 1 <em>or</em> option 2 <em>or</em> option 3 is saved in that position in the file.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truee-data"><a class="anchor" href="#truee-data"></a><code>e.data</code></h4>
<div class="paragraph">
<p><code>e.data</code> is a RELative file containing BBS configuration information, as well as BBS statistics.</p>
</div>
<div class="paragraph">
<p>The record size is 31 bytes.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 17. e.data File Format</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Record</th>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">Possible Values</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ca</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total calls to the system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unused</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">one-time caller weed cutoff, in months</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unused</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ur</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Highest user account # +1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unused</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>d3$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last caller handle</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pp$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default null password</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/time of last user logoff</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>p1%,p2%,p3%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prime Time info</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time allowed per call, Prime Time start, Prime Time end</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>l2,l2$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System Reservation Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>0</code>=None | <code>1</code>=One Call | <code>2</code>=All Calls] , [<code>^</code>=No Password | 1-14 Character Password]</p>
<p class="tableblock"><code>0,^</code>: No reservation, no password</p>
<p class="tableblock"><code>1,ONCE</code>: Reserved for one call with password <code>ONCE</code></p>
<p class="tableblock"><code>2,ALL</code>: Reserved for all calls with password <code>ALL</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22-30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unused</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">31</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Next available user account #</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RS232 Interface Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>0</code>=User Port | <code>1</code>=SwiftLink]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">33-34</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unused</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">35</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>am$</code>, <code>d6$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/time of last log reset</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unused</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">37</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>y%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clock set device</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>1</code>=Manual | <code>3</code>=Lt.Kernal Port 1 | <code>4</code>=Lt.Kernal Port 2 | <code>8-29</code>=CMD Device #]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">38</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lk%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lt.Kernal device number</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">39</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoweed cutoff, in months</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>df%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default text color</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">41</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Printer secondary address</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">42</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Printer line feeds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>0</code>=no | <code>10</code>=yes]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password mask character(s)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">44</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log start date</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">45</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tz$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BBS time zone abbreviation/hour offset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>e.g.</em>, <code>EST0700</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">46</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unused</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">47</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bn$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BBS name</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c1$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entering chat message</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">49</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>c2$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exiting chat message</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Netsub ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">increments by 1 when net post/response made</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">51</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cc$</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BBS identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>e.g.</em>, <code>WN</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">52</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System device, drive</p></td>
<td class="tableblock halign-left valign-top" rowspan="6"><p class="tableblock">For records 52-57, devices and drives are in separate fields of each record (stored as two lines separated by a carriage return).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E-Mail device, drive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">54</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Etcetera device, drive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">55</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory device, drive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">56</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module device, drive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">57</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User device, drive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">58</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Credits for new user</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.1<br>
Last updated 2021-05-08 16:11:45 -0700
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>